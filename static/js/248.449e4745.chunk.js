"use strict";(self.webpackChunkda_rfo_02_portal=self.webpackChunkda_rfo_02_portal||[]).push([[248],{2309:function(e,s,n){n.r(s);var c=n(5861),i=n(885),o=n(7757),t=n.n(o),r=n(2791),a=n(6871),l=n(9051),d=n(5617),u=n(2426),m=n.n(u),x=n(1405),j=n(7373),f=n(370),h=n(9126),p=n(6782),v=n(8230),_=n(8950),C=n(1146),y=n(184),g=n(763);s.default=function(){var e,s,n=(0,a.UO)(),o=n.com_id,u=n.inbox_id,N=(0,x.v9)((function(e){return e.tasks})),k=N.viewCommunicationData,b=N.isLoading,w=N.errorMessage,M=(0,x.v9)((function(e){return e.user})).user,D=(0,x.I0)(),O=(0,a.s0)(),Y=(0,r.useState)(!1),R=(0,i.Z)(Y,2),A=R[0];R[1];(0,r.useEffect)((function(){D((0,j.IG)(o)),D((0,p.pv)(u))}),[D,o]);var E=k.com_controlNo,S=k.com_source_name,P=k.com_source_position,T=k.com_source_office,W=k.com_subject,Z=k.com_dateCreated,z=k.com_other_remarks,G=k.com_urgency,I=k.com_due_date,L=k.scanned,B=void 0===L?[]:L,J=k.attachments,K=void 0===J?[]:J,Q=k.employee,U=void 0===Q?{}:Q,$=(0,C.useReactToPrint)({content:function(){var e=document.createElement("div");return(0,_.W)(B).forEach((function(s){var n=document.createElement("img");n.setAttribute("src",s.src),n.setAttribute("class","img-fluid"),e.appendChild(n)})),e},pageStyle:"print",documentTitle:"scanned"}),q=(0,r.useState)(!1),F=(0,i.Z)(q,2),H=F[0],V=F[1],X=function(){var e=(0,c.Z)(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this communication?")){e.next=5;break}return e.next=3,D((0,v.vQ)(o));case 3:"succesfully deleted"===e.sent.payload&&(console.log("Communication has been deleted"),O("/dts/managementOfCommunications/inbox"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(e){var s=e.className;return(0,y.jsxs)("div",{className:s,children:[(0,y.jsx)(f.un,{allowedPermissions:"editCommunication",children:(0,y.jsx)(f.s,{color:"success",size:"sm",icon:(0,y.jsx)(h.Aac,{}),onClick:function(){V(!H)}})}),(0,y.jsx)(f.un,{allowedPermissions:"deleteCommunication",children:(0,y.jsx)(f.s,{icon:(0,y.jsx)(h.dnY,{}),color:"danger",size:"sm",className:"ms-1",onClick:X})})]})},se=function(){switch(G){case"OMG":return(0,y.jsx)(l.Ct,{color:"danger",children:"OMG"});case"Rush":return(0,y.jsx)(l.Ct,{color:"warning",children:"Rush"});default:return(0,y.jsx)(l.Ct,{color:"secondary",children:"Regular"})}};return(0,y.jsxs)(l.W2,{className:"py-3",children:[!g.isEmpty(k)&&(0,y.jsx)(d.AW,{comData:k,isModalOpen:H,toggleModal:V}),(0,y.jsxs)(f.pO,{isLoading:b,errorMessage:w,children:[(0,y.jsx)(f.Tv,{isOpen:A}),(0,y.jsxs)(l.Zb,{children:[(0,y.jsxs)(l.Ol,{className:"d-flex flex-column",children:[(0,y.jsx)("div",{className:"d-flex justify-content-end",children:(0,y.jsx)(ee,{className:"d-flex d-sm-none"})}),(0,y.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,y.jsx)("h4",{children:E}),(0,y.jsx)(ee,{className:"d-none d-sm-flex"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(se,{}),!g.isNull(I)&&(0,y.jsxs)(l.Ct,{color:"info",className:"ms-1",children:["Due Date: ",m()(I).format("dddd, MMMM DD, YYYY")]}),(0,y.jsxs)("i",{className:"text-secondary d-block",children:["Created by"," ","".concat(U.emp_firstname," ").concat(U.emp_lastname)," -"," ",m()(Z).format("DD/MM/YYYY")]})]})]}),(0,y.jsxs)(l.eW,{children:[(0,y.jsx)("h4",{className:"text-info",children:W}),((null===(e=M.role_name)||void 0===e?void 0:e.includes("Process-level Approver"))||(null===(s=M.role_name)||void 0===s?void 0:s.includes("Approver"))&&M.office_code.includes("RTD"))&&(0,y.jsx)(f.s,{name:"Print Scanned Copies",className:"ms-auto d-block",outline:!0,icon:(0,y.jsx)(h.dwT,{}),onClick:$}),(0,y.jsx)(d.hJ,{title:"Scanned Copies",images:(0,_.W)(B)}),(0,y.jsx)("br",{}),(0,y.jsx)(d.$f,{attachments:(0,_.D)(K)}),(0,y.jsx)("hr",{}),(0,y.jsxs)("div",{className:"p-2",children:[(0,y.jsx)("span",{className:"lead",children:"Other Remarks"}),(0,y.jsx)("p",{children:z})]})]}),(0,y.jsx)(l.iR,{children:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{children:"Source: "}),(0,y.jsxs)("u",{children:[(0,y.jsx)("strong",{children:S}),!g.isEmpty(P)&&(0,y.jsxs)("span",{children:[", ",P]}),!g.isEmpty(T)&&(0,y.jsxs)("span",{children:[", ",T]})]})]})})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between mt-2",children:[(0,y.jsx)(f.s,{size:"md",color:"primary",name:"Back",icon:(0,y.jsx)(h.pjk,{}),onClick:function(){O(-1),D((0,j.uR)())}}),(0,y.jsx)(d.MK,{})]})]})]})}}}]);
//# sourceMappingURL=248.449e4745.chunk.js.map