"use strict";(self.webpackChunkda_rfo_02_portal=self.webpackChunkda_rfo_02_portal||[]).push([[422],{3748:function(e,t,n){n.d(t,{P:function(){return c}});var c=function(e,t){return e.includes(t)}},6422:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var c,i=n(885),o=n(2791),r=n(9051),a=n(1405),s=n(3673),l=n(370),d=n(168),f=n(6140),u=n(1242),h=n(9126),m=n(3504),x=n(3748),j=n(184),p=(0,u.default)(r.Zb)(c||(c=(0,d.Z)(["\n  width: 300px !important;\n  .card-body {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]))),_=function(e){var t=e.analytics,n=e.analyticsRef,c=(0,o.useState)([]),s=(0,i.Z)(c,2),l=s[0],d=s[1],u=(0,a.v9)((function(e){return e.roles})).userPermissions,_=(0,a.v9)((function(e){return e.user.user})).role_name;(0,o.useEffect)((function(){var e=t.filter((function(e){return e.active}));d(e)}),[t]);var g={title:0!==l.length&&l[0].office_code+": Pending Vs Completed",is3D:!0,slices:[{color:"#FFC107"},{color:"#28A745"}]};return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(r.W2,{fluid:!0,id:"export_chart",ref:n,style:{background:"#FFF"},children:[(0,j.jsxs)(r.W2,{className:"d-flex",children:[(0,j.jsx)(p,{color:"light",children:(0,j.jsxs)(r.eW,{children:[(0,j.jsx)("div",{className:"me-4 img-fluid rounded-circle d-flex justify-content-center align-items-center",style:{width:"50px",height:"50px",fontSize:"24px",background:"#e8e8f7"},children:(0,j.jsx)(h.dcn,{className:"text-primary"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{children:0!==l.length&&l[0].total}),(0,j.jsx)("span",{children:"TOTAL"})]})]})}),(0,j.jsx)(p,{color:"light",className:"ms-3",children:(0,j.jsxs)(r.eW,{children:[(0,j.jsx)("div",{className:"me-4 img-fluid rounded-circle d-flex justify-content-center align-items-center",style:{width:"50px",height:"50px",fontSize:"24px",background:"#efe7be"},children:(0,j.jsx)(h.YZq,{style:{color:"#df7905"}})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{children:0!==l.length&&l[0].data[1][1]}),0!==l.length&&0===l[0].data[1][1]||!(0,x.P)(u,"exportReport")||!_.includes("Process")?"PENDING":(0,j.jsx)(m.rU,{to:"/dts/managementOfCommunications/reports/".concat(0!==l.length&&l[0].com_ids),children:"PENDING"})]})]})}),(0,j.jsx)(p,{color:"light",className:"ms-3",children:(0,j.jsxs)(r.eW,{children:[(0,j.jsx)("div",{className:"me-4 img-fluid rounded-circle d-flex justify-content-center align-items-center",style:{width:"50px",height:"50px",fontSize:"24px",background:"#c6e8d0"},children:(0,j.jsx)(h.Reu,{className:"text-success"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h3",{children:0!==l.length&&l[0].data[2][1]}),(0,j.jsx)("span",{children:"COMPLETED"})]})]})})]}),(0,j.jsx)(r.W2,{children:(0,j.jsx)(f.kL,{chartType:"PieChart",data:0!==l.length&&l[0].data,options:g,width:"100%",height:"400px",loader:(0,j.jsxs)("div",{className:"d-flex justify-content-center mt-5",children:[(0,j.jsx)(r.$j,{}),(0,j.jsx)("span",{className:"ms-2",children:"Loading Chart..."})]})})})]})})},g=n(2982),y=(n(9607),n(1600)),C=(n(4464),n(763)),v=function(e){var t=e.setAnalytics,n=e.analytics,c=e.analyticsData,s=e.reports,d=(0,a.I0)(),f=(0,a.v9)((function(e){return e.offices})).offices,u=(0,a.v9)((function(e){return e.user})).user,h=(0,o.useState)([]),m=(0,i.Z)(h,2),x=m[0],p=m[1],_=(0,o.useState)(""),v=(0,i.Z)(_,2),E=v[0],P=v[1],N=function(e){var n=e.target.parentElement.getAttribute("data-office"),i=c.map((function(e){return n===e.office_code?{data:[["Category","Count"],["Pending Communication",e.data[1][1]],["Completed Communication",e.data[2][1]]],total:e.total,active:!0,office_code:e.office_code,com_ids:e.com_ids}:{data:[["Category","Count"],["Pending Communication",e.data[1][1]],["Completed Communication",e.data[2][1]]],total:e.total,active:!1,office_code:e.office_code,com_ids:e.com_ids}}));t((0,g.Z)(i))};(0,o.useEffect)((function(){d((0,y.T)())}),[d]),(0,o.useEffect)((function(){var e,t=f.filter((function(e){return e.office_under===u.office_code}));e=f.filter((function(e){return t.map((function(e){return e.office_code})).includes(e.office_under)||e.office_code===u.office_code||e.office_under===u.office_code})).map((function(e){return e})).filter((function(e){return"ORED"!==e.office_code})),C.isEmpty(u)||(u.role_name.includes("Process-level")?p(f):p(e))}),[f,u]),(0,o.useEffect)((function(){var e=x.map((function(e){return e.office_code})),c=n.filter((function(t){return e.includes(t.office_code)})).map((function(e,t){return{data:[["Category","Count"],["Pending Communication",e.total-e.completed],["Completed Communication",e.completed]],total:e.total,active:0===t&&!C.isEmpty(u)&&!u.role_name.includes("Process-level"),office_code:e.office_code,com_ids:e.com_ids}}));if(!C.isEmpty(u)&&u.role_name.includes("Process-level")){var i=s.filter((function(e){return C.isEmpty(e.action_taken)})).length,o=s.filter((function(e){return!C.isEmpty(e.action_taken)})).length;c.unshift({data:[["Category","Count"],["Pending Communication",i],["Completed Communication",o]],total:i+o,active:!0,office_code:"DA RFO2",office_group:null,com_ids:"all"})}t((0,g.Z)(c))}),[f]);var k=c.filter((function(e){return!C.isEmpty(e)})).filter((function(e){return e.office_code.toLowerCase().includes(E.toLowerCase())})).map((function(e,t){return(0,j.jsxs)("tr",{className:e.active?"table-dark":null,"data-office":e.office_code,onClick:N,children:[(0,j.jsx)("td",{children:e.office_code},"col_1_".concat(t)),(0,j.jsx)("td",{children:e.data[1][1]},"col_2_".concat(t)),(0,j.jsx)("td",{children:e.data[2][1]},"col_3_".concat(t)),(0,j.jsx)("td",{children:e.total},"col_4_".concat(t))]},"".concat(t))}));return(0,j.jsxs)("div",{style:{overflowY:"auto",height:"80vh"},children:[(0,j.jsx)(l.kP,{placeholder:"Search Office",searchValue:E,onSearchValueChange:function(e){P(e.target.value)},clearSearch:function(e){P("")}}),(0,j.jsx)("br",{}),(0,j.jsxs)(r.iA,{hover:!0,bordered:!0,striped:!0,children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"OFFICE"}),(0,j.jsx)("th",{children:"PENDING"}),(0,j.jsx)("th",{children:"COMPLETED"}),(0,j.jsx)("th",{children:"TOTAL"})]})}),(0,j.jsx)("tbody",{children:k})]})]})},E=n(2426),P=n.n(E),N=n(4622),k=n(1146),b=n(763),w=function(){var e=(0,a.v9)((function(e){return e.reports})),t=e.analytics,n=e.errorMessage,c=e.isLoading,d=e.reports,f=(0,o.useRef)(),u=(0,o.useState)([{data:[["Category","Count"],["Pending Communication",d.filter((function(e){return b.isEmpty(e.action_taken)})).length],["Completed Communication",d.filter((function(e){return!b.isEmpty(e.action_taken)})).length]],active:!0,office_code:"DA RFO2",com_ids:"all"}]),m=(0,i.Z)(u,2),x=m[0],p=m[1],g=(0,a.I0)(),y=(0,k.useReactToPrint)({content:function(){return document.getElementById("export_chart")},pageStyle:"print",documentTitle:"Analytics Chart"});return(0,o.useEffect)((function(){g((0,s.QL)()),g((0,s.IH)())}),[g]),(0,j.jsx)(l.pO,{isLoading:c,errorMessage:n,children:(0,j.jsxs)(r.W2,{children:[(0,j.jsx)("br",{}),(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsx)("h3",{children:"Analytics"}),(0,j.jsxs)("div",{className:"d-flex align-items-center ms-auto",children:[(0,j.jsx)(l.s,{name:"Print Chart",color:"success",outline:!0,icon:(0,j.jsx)(h.dwT,{}),className:"me-2",onClick:y}),(0,j.jsx)(l.s,{name:"Export Chart",outline:!0,icon:(0,j.jsx)(h.QNI,{}),onClick:function(){N.YM(document.getElementById("export_chart")).then((function(e){var t=document.createElement("a");t.download="analytics_chart_"+P()().format(),t.href=e,t.click()}))}})]})]}),(0,j.jsx)("br",{}),(0,j.jsxs)(r.X2,{children:[(0,j.jsx)(r.JX,{md:"4",children:(0,j.jsx)(v,{setAnalytics:p,analytics:t,analyticsData:x,reports:d})}),(0,j.jsx)(r.JX,{md:"8",children:(0,j.jsx)(_,{analytics:x,analyticsRef:f})})]})]})})}}}]);
//# sourceMappingURL=422.5114c8d4.chunk.js.map