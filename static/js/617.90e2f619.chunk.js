"use strict";(self.webpackChunkda_rfo_02_portal=self.webpackChunkda_rfo_02_portal||[]).push([[617],{8950:function(e,n,s){s.d(n,{D:function(){return a},W:function(){return c}});var t="http://122.54.74.74:3001",c=function(e){return null===e||void 0===e?void 0:e.map((function(e){var n=e.scan_path.replace("uploads/dts/",t+"/dts/");e.scan_path.replace("uploads\\dts\\","http://localhost:3001/dts/");return{src:n,thumbnail:n}}))},a=function(e){return null===e||void 0===e?void 0:e.map((function(e){var n=e.attach_path.replace("uploads/dts/",t+"/dts/");e.attach_path.replace("uploads\\dts\\","http://localhost:3001/dts/");return{src:n,attach_name:e.attach_name}}))}},5540:function(e,n,s){s(2791);var t=s(9126),c=s(1405),a=s(6871),r=s(2741),i=s(7373),o=s(370),l=s(184);n.Z=function(){var e=(0,c.v9)((function(e){return e.tasks})),n=(e.tasks,e.taskCounter),s=(0,a.s0)(),d=(0,c.I0)();return(0,l.jsx)(o.s,{size:"md",color:"primary",name:"Back",icon:(0,l.jsx)(t.pjk,{}),onClick:function(){0!==n?d((0,i.uR)()):(console.log(n),d((0,i.OC)()),d((0,r.Bm)()),s("/dts/managementOfCommunications/inbox"))}})}},5617:function(e,n,s){s.d(n,{fz:function(){return p},iI:function(){return $},Kn:function(){return me},$f:function(){return I},xE:function(){return ee.Z},c1:function(){return g},AW:function(){return G},y6:function(){return O},hJ:function(){return M},Ft:function(){return R},TN:function(){return pe},AX:function(){return je},MK:function(){return L},P_:function(){return A},XN:function(){return ve},Ls:function(){return V},Qc:function(){return B},tn:function(){return D},Pt:function(){return re}});var t,c=s(5861),a=s(885),r=s(7757),i=s.n(r),o=s(2791),l=s(1405),d=s(9051),u=s(370),m=s(9126),x=s(3513),f=s(6683),h=s(184),j=function(e){var n=e.isModalOpen,s=e.toggleModal,t=e.data,a=(0,l.I0)(),r=function(){var e=(0,c.Z)(i().mark((function e(n){var c,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),(c=new FormData(n.target)).append("cat_id",t.cat_id),r={},c.forEach((function(e,n){r[n]=e})),e.next=7,a((0,f.yr)(r)).then((function(){a((0,f.CP)()),s()}));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsx)(u.F0,{isModalOpen:n,toggleModal:s,title:"Edit Category",size:"md",backdrop:!1,children:(0,h.jsxs)(d.l0,{onSubmit:r,children:[(0,h.jsx)(d.fe,{children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"cat_name",children:"Category Name"}),(0,h.jsx)(d.II,{type:"text",id:"cat_name",name:"cat_name",required:!0,defaultValue:t.cat_name})]})}),(0,h.jsxs)(d.mz,{children:[(0,h.jsx)(u.s,{type:"submit",size:"sm",color:"primary",name:"Save",icon:(0,h.jsx)(m.Y_C,{})}),(0,h.jsx)(u.s,{size:"sm",onClick:function(){return s()},name:"Cancel",color:"dark",icon:(0,h.jsx)(m.Ovj,{})})]})]})})},_=function(e){var n=e.isModalOpen,s=e.toggleModal,t=(0,o.useState)(!1),r=(0,a.Z)(t,2),_=r[0],p=r[1],g=(0,o.useState)({}),v=(0,a.Z)(g,2),y=v[0],b=v[1],C=(0,l.v9)((function(e){return e.classifications})),N=C.categories,I=C.isLoading,k=(0,l.I0)(),w=[{name:"Category",selector:function(e){return e.cat_name}},{name:"Action",cell:function(e){return(0,h.jsxs)("div",{className:"d-flex my-2",children:[(0,h.jsx)(d.zx,{size:"sm",color:"success",className:"me-1",onClick:function(){p(!_),b(e)},children:(0,h.jsx)(m.Aac,{})}),(0,h.jsx)(d.zx,{size:"sm",color:"danger",onClick:(0,c.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Are you sure you want to delete ".concat(e.cat_name,"?"))){n.next=5;break}return n.next=3,k((0,f.uu)(e.cat_id));case 3:"category_delete_unable"===n.sent.payload?alert("Unable to delete. This category is associated to a classication."):k((0,f.CP)());case 5:case"end":return n.stop()}}),n)}))),children:(0,h.jsx)(m.dnY,{})})]})}}],M=N,z=function(){var e=(0,c.Z)(i().mark((function e(n){var s,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s=new FormData(n.target),t={},s.forEach((function(e,n){t[n]=e})),e.next=6,k((0,f.i8)(t)).then((function(){return k((0,f.CP)())}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsxs)(u.F0,{isModalOpen:n,toggleModal:s,title:"Manage Categories",size:"lg",backdrop:!1,children:[(0,h.jsx)(j,{data:y,isModalOpen:_,toggleModal:p}),(0,h.jsxs)(d.fe,{children:[(0,h.jsx)(d.l0,{onSubmit:z,children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"cat_name",children:"Category Name"}),(0,h.jsxs)(d.BZ,{children:[(0,h.jsx)(d.II,{type:"text",id:"cat_name",name:"cat_name",required:!0}),(0,h.jsx)(d.zx,{type:"submit",children:"Add"})]})]})}),(0,h.jsx)("hr",{}),(0,h.jsx)(x.ZP,{data:M,columns:w,highlightOnHover:!0,pagination:!0,progressPending:I,progressComponent:(0,h.jsx)(d.$j,{})})]}),(0,h.jsx)(d.mz,{children:(0,h.jsx)(u.s,{size:"sm",onClick:function(){return s()},name:"Back",color:"primary",icon:(0,h.jsx)(m.e6h,{})})})]})},p=function(e){var n=e.isModalOpen,s=e.toggleModal,t=(0,l.I0)(),r=(0,o.useState)(!1),x=(0,a.Z)(r,2),j=x[0],p=x[1],g=(0,l.v9)((function(e){return e.classifications})).categories.map((function(e,n){return(0,h.jsx)("option",{value:e.cat_id,children:e.cat_name},n)}));return(0,o.useEffect)((function(){t((0,f.CP)())}),[t]),(0,h.jsxs)(u.F0,{isModalOpen:n,toggleModal:s,title:"Add Classification",size:"lg",children:[(0,h.jsx)(_,{toggleModal:p,isModalOpen:j}),(0,h.jsxs)(d.l0,{onSubmit:function(){var e=(0,c.Z)(i().mark((function e(n){var c,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=new FormData(n.target),a={},c.forEach((function(e,n){a[n]=e})),e.next=6,t((0,f.Gc)(a)).then((function(){t((0,f.bn)()),s()}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:[(0,h.jsxs)(d.fe,{children:[(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)("div",{className:"d-flex mb-1",children:[(0,h.jsx)(d.__,{for:"cat_id",children:"Category"}),(0,h.jsx)("div",{className:"ms-auto",children:(0,h.jsx)(d.zx,{onClick:function(){return p(!j)},size:"sm",className:"me-1",color:"success",outline:!0,children:"Manage Categories"})})]}),(0,h.jsx)(d.II,{type:"select",id:"cat_id",name:"cat_id",children:g})]}),(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"class_name",children:"Classification Name"}),(0,h.jsx)(d.II,{type:"text",id:"class_name",name:"class_name"})]}),(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"class_code",children:"Classification Code"}),(0,h.jsx)(d.II,{type:"text",id:"class_code",name:"class_code"})]}),(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"class_name",children:"Due(days)"}),(0,h.jsx)(d.II,{type:"number",id:"class_due",name:"class_due",defaultValue:0,min:"0"})]})]}),(0,h.jsxs)(d.mz,{children:[(0,h.jsx)(u.s,{type:"submit",size:"sm",color:"primary",name:"Save",icon:(0,h.jsx)(m.Y_C,{})}),(0,h.jsx)(u.s,{size:"sm",onClick:function(){return s()},name:"Cancel",color:"dark",icon:(0,h.jsx)(m.Ovj,{})})]})]})]})},g=function(e){var n=e.isModalOpen,s=e.toggleModal,t=e.classificationData,r=(0,l.I0)(),x=(0,o.useState)(!1),j=(0,a.Z)(x,2),p=j[0],g=j[1],v=(0,l.v9)((function(e){return e.classifications})).categories.map((function(e,n){return(0,h.jsx)("option",{value:e.cat_id,selected:t.cat_id===e.cat_id&&"true",children:e.cat_name},n)}));return(0,o.useEffect)((function(){r((0,f.CP)())}),[r]),(0,h.jsxs)(u.F0,{isModalOpen:n,toggleModal:s,title:"Edit Classification",size:"lg",children:[(0,h.jsx)(_,{toggleModal:g,isModalOpen:p}),(0,h.jsxs)(d.l0,{onSubmit:function(){var e=(0,c.Z)(i().mark((function e(n){var c,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=new FormData(n.target),a={},c.forEach((function(e,n){a[n]=e})),a.class_id=t.class_id,e.next=7,r((0,f.tU)(a)).then((function(){r((0,f.bn)()),s()}));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:[(0,h.jsxs)(d.fe,{children:[(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)("div",{className:"d-flex mb-1",children:[(0,h.jsx)(d.__,{for:"cat_id",children:"Category"}),(0,h.jsx)("div",{className:"ms-auto",children:(0,h.jsx)(d.zx,{onClick:function(){return g(!p)},size:"sm",className:"me-1",color:"success",outline:!0,children:"Manage Categories"})})]}),(0,h.jsx)(d.II,{type:"select",id:"cat_id",name:"cat_id",children:v})]}),(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"class_name",children:"Classification Name"}),(0,h.jsx)(d.II,{type:"text",id:"class_name",name:"class_name",defaultValue:t.class_name})]}),(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"class_code",children:"Classification Code"}),(0,h.jsx)(d.II,{type:"text",id:"class_code",name:"class_code",defaultValue:t.class_code})]}),(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"class_name",children:"Due(days)"}),(0,h.jsx)(d.II,{type:"number",id:"class_due",name:"class_due",defaultValue:t.class_due,min:0,minLength:1})]})]}),(0,h.jsxs)(d.mz,{children:[(0,h.jsx)(u.s,{type:"submit",size:"sm",color:"primary",name:"Save",icon:(0,h.jsx)(m.Y_C,{})}),(0,h.jsx)(u.s,{size:"sm",onClick:function(){return s()},name:"Cancel",color:"dark",icon:(0,h.jsx)(m.Ovj,{})})]})]})]})},v=s(2426),y=s.n(v),b=s(8230),C=s(556),N=s(763),I=function(e){var n=e.attachments,s=void 0===n?[]:n,t=s.map((function(e){return(0,h.jsx)("a",{href:e.src,target:"_blank",rel:"noopener noreferrer",className:"me-3",children:e.attach_name})}));return N.isEmpty(s)?(0,h.jsx)(h.Fragment,{}):(0,h.jsxs)("div",{className:"bg-super-light-green rounded py-2 px-3 shadow",children:[(0,h.jsx)("span",{className:"lead",children:"Attachments"}),(0,h.jsx)("div",{className:"d-flex flex-wrap",children:t})]})},k=s(3339),w=s.n(k),M=function(e){var n=e.images,s=void 0===n?[]:n,t=e.title;return s.length>0?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{style:{overflow:"auto",height:"400px"},children:[(0,h.jsx)("span",{className:"lead",children:t}),(0,h.jsx)(w(),{images:s,enableImageSelection:!1})]})}):(0,h.jsx)(h.Fragment,{})},z=s(8950),S=s(763),D=function(e){var n=e.isModalOpen,s=e.toggleModal,t=e.com_id,c=void 0===t?0:t,a=(0,l.v9)((function(e){return e.communication})).viewCommunicationData,r=(0,l.I0)();(0,o.useEffect)((function(){r((0,C.IG)(c))}),[r,c]);var i=function(){switch(O){case"OMG":return(0,h.jsx)(d.Ct,{color:"danger",children:"OMG"});case"Rush":return(0,h.jsx)(d.Ct,{color:"warning",children:"Rush"});default:return(0,h.jsx)(d.Ct,{color:"secondary",children:"Regular"})}},m=a.com_controlNo,x=a.com_source_name,f=a.com_source_position,j=a.com_source_office,_=a.com_subject,p=a.com_dateCreated,g=a.com_other_remarks,v=(a.class_name,a.cat_name,a.scanned),b=void 0===v?[]:v,N=a.attachments,k=void 0===N?[]:N,w=a.employee,D=void 0===w?{}:w,Z=a.com_due_date,O=a.com_urgency;return(0,h.jsxs)(u.F0,{isModalOpen:n,toggleModal:s,title:m,size:"xl",children:[(0,h.jsx)(d.fe,{children:(0,h.jsx)("div",{children:(0,h.jsxs)(d.Zb,{children:[(0,h.jsxs)(d.Ol,{className:"d-flex flex-column",children:[(0,h.jsx)("div",{className:"d-flex justify-content-between",children:(0,h.jsx)("h4",{children:m})}),(0,h.jsxs)("div",{children:[(0,h.jsx)(i,{}),!S.isNull(Z)&&(0,h.jsxs)(d.Ct,{color:"info",className:"ms-1",children:["Due Date: ",y()(Z).format("dddd, MMMM DD, YYYY")]}),(0,h.jsxs)("i",{className:"text-secondary d-block",children:["Created by"," ","".concat(D.emp_firstname," ").concat(D.emp_lastname)," -"," ",y()(p).format("DD/MM/YYYY")]})]})]}),(0,h.jsxs)(d.eW,{children:[(0,h.jsx)("h4",{className:"text-info",children:_}),(0,h.jsx)(M,{title:"Scanned Copies",images:(0,z.W)(b)}),(0,h.jsx)("br",{}),(0,h.jsx)(I,{attachments:(0,z.D)(k)}),(0,h.jsx)("hr",{}),(0,h.jsxs)("div",{className:"p-2",children:[(0,h.jsx)("span",{className:"lead",children:"Other Remarks"}),(0,h.jsx)("p",{children:g})]})]}),(0,h.jsx)(d.iR,{children:(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:"Source: "}),(0,h.jsxs)("u",{children:[(0,h.jsx)("strong",{children:x}),!S.isEmpty(f)&&(0,h.jsxs)("span",{children:[", ",f]}),!S.isEmpty(j)&&(0,h.jsxs)("span",{children:[", ",j]})]})]})})]})})}),(0,h.jsx)(d.mz,{children:(0,h.jsx)(d.zx,{color:"success",onClick:s,children:"Okay"})})]})},Z=s(763),O=function(e){var n=e.isModalOpen,s=e.toggleModal,t=e.draftData,r=(e.socket,(0,l.I0)()),x=(0,l.v9)((function(e){return e.user.user})).office_code,j=(0,l.v9)((function(e){return e.classifications})).classifications,_=((0,l.v9)((function(e){return e.communication})).isControlNoExist,(0,o.useState)(y()(t.com_due_date).format("YYYY-MM-DD"))),p=(0,a.Z)(_,2),g=p[0],v=p[1],N=(0,o.useState)(t.class_code),I=(0,a.Z)(N,2),k=I[0],w=I[1],M=(0,l.v9)((function(e){return e.drafts})),z=M.newAddedCommunication,S=(M.userToNotify,(0,l.v9)((function(e){return e.communication})).viewCommunicationData,(0,o.useState)(!1)),O=(0,a.Z)(S,2),Y=O[0],F=O[1],E=j.map((function(e,n){return e.class_id===t.class_id?(0,h.jsxs)("option",{value:e.class_id,"data-classcode":"".concat(e.class_code),selected:!0,children:[e.class_name," - ",e.cat_name]},n):(0,h.jsxs)("option",{value:e.class_id,"data-classcode":"".concat(e.class_code),children:[e.class_name," - ",e.cat_name]},n)}));(0,o.useEffect)((function(){r((0,f.bn)())}),[r]);var X=function(){var e=t.com_controlNo.split("."),n=e[e.length-1].split("-");n.pop();var s=n.join("-"),c=n.slice(Math.max(n.length-2,0));console.log(c);var a="DARFO2.".concat(x);return a+=""!==k?"."+k+"-"+c.join("-")+"-":"."+s+"-"},A=function(){var e=t.com_controlNo.split("-");return e[e.length-1]},R=function(){var e=(0,c.Z)(i().mark((function e(n){var s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s=new FormData(n.target),s.get("control_no"),s.append("com_id",t.com_id),s.set("control_no",X()+A()),s.append("draft",!1),e.next=8,r((0,b.XD)(s));case 8:c=e.sent,console.log(c.payload),c.payload.communication&&(F(!Y),r((0,b.Oe)()));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=(0,c.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData(document.getElementById("edit_draft_modal")),n.get("control_no"),n.append("com_id",t.com_id),n.set("control_no",X()+A()),n.append("draft",!0),e.next=7,r((0,b.XD)(n));case 7:r((0,b.Oe)());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)(u.F0,{isModalOpen:n,toggleModal:s,title:"Draft",size:"xl",children:[(0,h.jsx)(D,{isModalOpen:Y,toggleModal:function(){F(!Y),r((0,C.mc)()),r((0,b.X9)()),s()},com_id:z}),(0,h.jsxs)(d.l0,{onSubmit:R,id:"edit_draft_modal",children:[(0,h.jsx)(d.fe,{children:(0,h.jsx)(d.W2,{className:"mt-2",children:(0,h.jsxs)(d.X2,{children:[(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"control_no",children:["Control No. ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsxs)(d.BZ,{children:[(0,h.jsx)(d.O3,{children:X()+A()}),(0,h.jsx)(d.AG,{children:"Control Number already exist"})]})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"class_id",children:["Classifications ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsxs)(d.II,{bsSize:"sm",id:"class_id",name:"class_id",type:"select",onChange:function(){var e=document.getElementById("class_id"),n=e.options[e.selectedIndex],s=n.getAttribute("value"),t=j.filter((function(e){return e.class_id===parseInt(s)}));t[0]&&t[0].class_due>0?v(y()().add(t[0].class_due,"d").format("YYYY-MM-DD")):v(null),w(n.getAttribute("data-classcode"))},required:!0,children:[(0,h.jsx)("option",{value:"","data-classcode":"00-0",children:"Select Classification"}),E]})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"due_date",children:"Due Date"}),(0,h.jsx)(d.II,{bsSize:"sm",id:"due_date",name:"due_date",type:"date",onChange:function(e){v(e.target.value)},value:Z.isNull(g)?"":g})]})}),(0,h.jsxs)(d.JX,{md:"12",className:"border rounded rounded-4 p-2 mx-2",children:[(0,h.jsx)("h6",{children:"Source"}),(0,h.jsxs)(d.X2,{children:[(0,h.jsx)(d.JX,{md:"4",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"source_name",children:["Name ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.II,{bsSize:"sm",id:"source_name",name:"source_name",type:"text",defaultValue:t.com_source_name,required:!0})]})}),(0,h.jsx)(d.JX,{md:"4",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"source_position",children:"Position"}),(0,h.jsx)(d.II,{bsSize:"sm",id:"source_position",name:"source_position",type:"text",defaultValue:t.com_source_position})]})}),(0,h.jsx)(d.JX,{md:"4",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"source_office",children:"Office"}),(0,h.jsx)(d.II,{bsSize:"sm",id:"source_office",name:"source_office",type:"text",defaultValue:t.com_source_office})]})})]})]}),(0,h.jsx)(d.JX,{md:"12",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"subject",children:["Subject ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.II,{bsSize:"sm",id:"subject",name:"subject",type:"textarea",defaultValue:t.com_subject,required:!0})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"date_received",children:["Date Received ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.II,{bsSize:"sm",id:"date_received",name:"date_received",type:"date",defaultValue:y()(t.com_dateReceived).format("YYYY-MM-DD"),required:!0})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"urgency",children:["Urgency ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.II,{bsSize:"sm",id:"urgency",name:"urgency",type:"select",required:!0,children:"Rush"===t.com_urgency?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("option",{value:"Rush",selected:!0,children:"Rush"}),(0,h.jsx)("option",{value:"Urgent",children:"Urgent"})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("option",{value:"Rush",children:"Rush"}),(0,h.jsx)("option",{value:"Urgent",selected:!0,children:"Urgent"})]})})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"scanned",children:"Scanned Copies"}),(0,h.jsx)(d.II,{size:"sm",id:"scanned",name:"scanned",type:"file",multiple:!0})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"attachments",children:"Attachments"}),(0,h.jsx)(d.II,{size:"sm",id:"attachments",name:"attachments",type:"file",multiple:!0})]})}),(0,h.jsx)(d.JX,{md:"12",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"other_remarks",children:"Other Remarks"}),(0,h.jsx)(d.II,{size:"sm",id:"other_remarks",name:"other_remarks",type:"textarea",defaultValue:t.com_other_remarks})]})})]})})}),(0,h.jsxs)(d.mz,{children:[(0,h.jsx)(u.s,{onClick:P,size:"sm",color:"primary",name:"Save Draft",icon:(0,h.jsx)(m.Y_C,{})}),(0,h.jsx)(u.s,{type:"submit",size:"sm",color:"success",name:"Add Communication",icon:(0,h.jsx)(m.Y_C,{})}),(0,h.jsx)(u.s,{size:"sm",onClick:function(){return s()},name:"Cancel",color:"dark",icon:(0,h.jsx)(m.Ovj,{})})]})]})]})},Y=(s(2966),s(1138),s(4221)),F=s(6782),E=s(3504),X=s(7373),A=function(e){var n=e.socket,s=(0,l.I0)();return(0,o.useEffect)((function(){null===n||void 0===n||n.on("receiveNotification",(function(e){Y.fn.info((0,h.jsx)(E.rU,{className:"text-light",to:e.link,onClick:function(){s((0,X.rh)(e.tasks)),s((0,X.uR)())},children:e.message}),e.title,3e4),s((0,F.EW)())}))}),[n,s]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(Y.mh,{})})},R=function(e){return(0,h.jsx)("div",{className:"d-flex flex-column align-items-end",children:(0,h.jsxs)("div",{className:"d-flex",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,h.jsx)("div",{className:"p-2 bg-danger"}),(0,h.jsx)("strong",{className:"ms-2",children:"OMG"})]}),(0,h.jsxs)("div",{className:"d-flex align-items-center justify-content-center ms-3",children:[(0,h.jsx)("div",{className:"p-2 bg-warning"}),(0,h.jsx)("strong",{className:"ms-2",children:"Rush"})]}),(0,h.jsxs)("div",{className:"d-flex align-items-center justify-content-center ms-3",children:[(0,h.jsx)("div",{className:"p-2 bg-light border"}),(0,h.jsx)("strong",{className:"ms-2",children:"Regular"})]})]})})},P=s(6871),J=s(4802),L=function(){var e=(0,J.v9)((function(e){return e.tasks})),n=e.tasks,s=e.taskCounter,t=((0,P.TH)(),(0,P.s0)()),a=(0,J.I0)(),r=(0,P.UO)().inbox_id,o=function(){var e=(0,c.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>s+1)){e.next=4;break}a((0,X.nu)()),e.next=7;break;case 4:return e.next=6,a((0,X.l7)(r));case 6:t("/dts/managementOfCommunications/inbox");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsx)(u.s,{size:"md",color:"primary",name:n.length===s+1?"Task Complete":"Next",icon:(0,h.jsx)(m.fmn,{}),onClick:o})},V=function(e){var n=e.name,s=e.desc,t=e.id,c=e.textbox,r=e.defaultValue,i=e.isLegendContains,l=e.value,u=(0,o.useState)(i(l)),m=(0,a.Z)(u,2),x=m[0],f=m[1];return(0,h.jsxs)(d.cw,{check:!0,children:[(0,h.jsx)(d.II,{type:"checkbox",name:n,id:t,onChange:function(){f(!x)},checked:x,value:l}),s&&(0,h.jsx)(d.__,{check:!0,for:t,className:"wrap",children:s}),c&&(0,h.jsx)(d.II,{type:"textarea",defaultValue:r,disabled:!x,rows:"3",name:"".concat(l,"_text")})]})},q=s(763),G=function(e){var n=e.isModalOpen,s=e.toggleModal,t=e.comData,r=(0,l.I0)(),x=(0,l.v9)((function(e){return e.user.user})).office_code,j=(0,l.v9)((function(e){return e.classifications})).classifications,_=(0,l.v9)((function(e){return e.communication})).isControlNoExist,p=(0,o.useState)(y()(t.com_due_date).format("YYYY-MM-DD")),g=(0,a.Z)(p,2),v=g[0],b=g[1],C=(0,o.useState)(t.class_code),N=(0,a.Z)(C,2),I=N[0],k=N[1],w=((0,P.TH)(),j.map((function(e,n){return e.class_id===t.class_id?(0,h.jsxs)("option",{value:e.class_id,"data-classcode":"".concat(e.class_code),selected:!0,children:[e.class_name," - ",e.cat_name]},n):(0,h.jsxs)("option",{value:e.class_id,"data-classcode":"".concat(e.class_code),children:[e.class_name," - ",e.cat_name]},n)})));(0,o.useEffect)((function(){r((0,f.bn)())}),[r]);var M=function(){var e=t.com_controlNo.split("."),n=e[e.length-1].split("-");n.pop();var s=n.join("-"),c=n.slice(Math.max(n.length-2,0)),a="DARFO2.".concat(x);return a+=""!==I?"."+I+"-"+c.join("-")+"-":"."+s+"-"},z=function(){var e=t.com_controlNo.split("-");return e[e.length-1]},S=function(){var e=(0,c.Z)(i().mark((function e(n){var c,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=new FormData(document.getElementById("edit_communication_modal")),c.get("control_no"),c.append("com_id",t.com_id),c.set("control_no",M()+z()),c.append("draft",!1),e.next=8,r((0,F.LI)(c));case 8:a=e.sent,console.log(a.payload),"edit_success"===a.payload&&r((0,X.IG)(t.com_id)),s();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),D=function(){return["Regular","Rush","OMG"].map((function(e){return(0,h.jsx)("option",{value:e,selected:e===t.com_urgency,children:e})}))};return(0,h.jsx)(u.F0,{isModalOpen:n,toggleModal:s,title:"Edit Communication",size:"xl",children:(0,h.jsxs)(d.l0,{onSubmit:S,id:"edit_communication_modal",children:[(0,h.jsx)(d.fe,{children:(0,h.jsx)(d.W2,{className:"mt-2",children:(0,h.jsxs)(d.X2,{children:[(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"control_no",children:["Control No. ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsxs)(d.BZ,{children:[(0,h.jsx)(d.O3,{children:M()+z()}),(0,h.jsx)(d.AG,{children:"Control Number already exist"})]})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"class_id",children:["Classifications ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsxs)(d.II,{bsSize:"sm",id:"class_id",name:"class_id",type:"select",onChange:function(){var e=document.getElementById("class_id"),n=e.options[e.selectedIndex],s=n.getAttribute("value"),t=j.filter((function(e){return e.class_id===parseInt(s)}));t[0]&&t[0].class_due>0?b(y()().add(t[0].class_due,"d").format("YYYY-MM-DD")):b(null),k(n.getAttribute("data-classcode"))},required:!0,children:[(0,h.jsx)("option",{value:"","data-classcode":"00-0",children:"Select Classification"}),w]})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"due_date",children:"Due Date"}),(0,h.jsx)(d.II,{bsSize:"sm",id:"due_date",name:"due_date",type:"date",onChange:function(e){b(e.target.value)},value:q.isNull(v)?"":v})]})}),(0,h.jsxs)(d.JX,{md:"12",className:"border rounded rounded-4 p-2 mx-2",children:[(0,h.jsx)("h6",{children:"Source"}),(0,h.jsxs)(d.X2,{children:[(0,h.jsx)(d.JX,{md:"4",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"source_name",children:["Name ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.II,{bsSize:"sm",id:"source_name",name:"source_name",type:"text",defaultValue:t.com_source_name,required:!0})]})}),(0,h.jsx)(d.JX,{md:"4",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"source_position",children:"Position"}),(0,h.jsx)(d.II,{bsSize:"sm",id:"source_position",name:"source_position",type:"text",defaultValue:t.com_source_position})]})}),(0,h.jsx)(d.JX,{md:"4",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"source_office",children:"Office"}),(0,h.jsx)(d.II,{bsSize:"sm",id:"source_office",name:"source_office",type:"text",defaultValue:t.com_source_office})]})})]})]}),(0,h.jsx)(d.JX,{md:"12",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"subject",children:["Subject ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.II,{bsSize:"sm",id:"subject",name:"subject",type:"textarea",defaultValue:t.com_subject,required:!0})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"date_received",children:["Date Received ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.II,{bsSize:"sm",id:"date_received",name:"date_received",type:"date",defaultValue:y()(t.com_dateReceived).format("YYYY-MM-DD"),required:!0})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"urgency",children:["Urgency ",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.II,{bsSize:"sm",id:"urgency",name:"urgency",type:"select",required:!0,children:(0,h.jsx)(D,{})})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"scanned",children:"Scanned Copies"}),(0,h.jsx)(d.II,{bsSize:"sm",id:"scanned",name:"scanned",type:"file",multiple:!0})]})}),(0,h.jsx)(d.JX,{md:"6",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"attachments",children:"Attachments"}),(0,h.jsx)(d.II,{bsSize:"sm",id:"attachments",name:"attachments",type:"file",multiple:!0})]})}),(0,h.jsx)(d.JX,{md:"12",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"other_remarks",children:"Other Remarks"}),(0,h.jsx)(d.II,{bsSize:"sm",id:"other_remarks",name:"other_remarks",type:"textarea",defaultValue:t.com_other_remarks})]})})]})})}),(0,h.jsxs)(d.mz,{children:[(0,h.jsx)(u.s,{type:"submit",size:"sm",color:"primary",name:"Save",disabled:_,icon:(0,h.jsx)(m.Y_C,{})}),(0,h.jsx)(u.s,{size:"sm",onClick:function(){return s()},name:"Cancel",color:"dark",icon:(0,h.jsx)(m.Ovj,{})})]})]})})},U=s(2741),B=function(e){var n=e.label,s=e.username,t=(0,l.I0)();return(0,h.jsxs)("div",{active:!0,className:"d-flex align-items-center justify-content-between",style:{minWidth:"200px"},children:[n," \xa0",(0,h.jsx)(u.s,{type:"button",onClick:function(e){t((0,U.on)(s))},icon:(0,h.jsx)(m.C7Q,{}),color:"danger"})]})},T=s(1588),W=s(1600),Q=s(168),K=s(2706),H=(0,s(1242).default)(K.ZP)(t||(t=(0,Q.Z)(["\n    .select__control{\n        min-width: 300px\n    }\n    @media only screen and (max-width:430px){\n        .select__control{\n            min-width: 230px !important\n        }\n    }\n"]))),$=function(){var e=(0,o.useState)(!1),n=(0,a.Z)(e,2),s=n[0],t=n[1],c=(0,o.useState)(!1),r=(0,a.Z)(c,2),i=r[0],u=r[1],x=(0,o.useState)(!1),f=(0,a.Z)(x,2),j=f[0],_=f[1],p=(0,o.useState)([]),g=(0,a.Z)(p,2),v=g[0],y=g[1],b=(0,o.useState)([]),C=(0,a.Z)(b,2),N=C[0],I=C[1],k=(0,l.v9)((function(e){return e.routing})).routingRecipients,w=(0,l.v9)((function(e){return e.accounts})),M=w.users,z=w.groups,S=(0,l.v9)((function(e){return e.offices})).offices,D=(0,l.v9)((function(e){return e.user})).user,Z=(0,o.useState)([]),O=(0,a.Z)(Z,2),Y=O[0],F=O[1],E=(0,l.I0)(),X=Y.filter((function(e){return!k.map((function(e){return e.value})).includes(e.user_username)})).map((function(e){return{user_id:e.user_id,user_username:e.user_username,user_fullname:"".concat(e.emp_firstname,"  ").concat(e.emp_lastname," - ").concat(e.office_code),role_name:e.role_name,role_id:e.role_id,value:e.user_username,label:"".concat(e.emp_firstname,"  ").concat(e.emp_lastname," - ").concat(e.office_code),type:"user"}})),A=z.map((function(e){return{value:e.group_id,label:e.group_name,type:"group"}}));return(0,o.useEffect)((function(){E((0,T.T8)()),E((0,T.jA)()),E((0,W.T)())}),[E]),(0,o.useEffect)((function(){var e=M.filter((function(e){return!e.role_name.includes("Process-level")&&(!e.role_name.includes("Encoder")||!D.role_name.includes("Process-level"))&&(!e.role_name.includes("Reviewer")||!D.role_name.includes("Process-level"))&&!e.role_name.includes("Admin")&&e.user_id!==D.user_id})),n=[],s=S.filter((function(e){return e.office_under===D.office_code}));n=S.filter((function(e){return s.map((function(e){return e.office_code})).includes(e.office_under)||e.office_code===D.office_code||e.office_under===D.office_code})).map((function(e){return e.office_code}));var t=e.filter((function(e){return n.includes(e.office_code)}));D.role_name.includes("Process-level")?F(e):F(t)}),[S,D]),(0,h.jsxs)("div",{className:"d-flex align-items-center",style:{zIndex:100},children:[s&&(0,h.jsxs)(d.hE,{children:[(0,h.jsx)(d.zx,{type:"button",color:"success",onClick:function(){t(!1),u(!0)},children:"User"}),(0,h.jsx)(d.zx,{type:"button",color:"warning",onClick:function(){t(!1),_(!0)},children:"Group"})]}),i&&!s&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(H,{options:X,isMulti:!0,onChange:function(e){y(e)},className:"basic-multi-select",classNamePrefix:"select"}),(0,h.jsx)(d.zx,{color:"success",onClick:function(){E((0,U.I2)(v)),t(!1),u(!1)},children:"Add"})]}),j&&!s&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(H,{options:A,isMulti:!0,onChange:function(e){I(e)},className:"basic-multi-select",classNamePrefix:"select"}),(0,h.jsx)(d.zx,{color:"success",onClick:function(){E((0,U.I2)(N)),t(!1),_(!1)},children:"Add"})]}),s||i||j?(0,h.jsx)(d.zx,{color:"danger",type:"button",className:"ms-2",onClick:function(){t(!1),u(!1),_(!1),y([])},children:(0,h.jsx)(m.C7Q,{})}):(0,h.jsxs)(d.zx,{color:"primary",type:"button",className:"ms-2",onClick:function(){t(!0),y([])},children:["Add Recipient/s \xa0",(0,h.jsx)(m.B8K,{})]})]})},ee=s(5540),ne=s(9127),se=function(e){var n=e.isOpen,s=e.scanned,t=e.attachments,c=e.setOpen,a=e.isLoading;return(0,h.jsx)(u.F0,{isModalOpen:n,toggleModal:c,title:"View Uploads",size:"lg",children:(0,h.jsx)(d.fe,{children:(0,h.jsx)(u.pO,{isLoading:a,children:0===s.length&&0===t.length?(0,h.jsx)("p",{className:"lead text-info text-center",children:"No Uploads To Display"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(M,{title:"Scanned Copies",images:(0,z.W)(s)}),(0,h.jsx)(I,{attachments:(0,z.D)(t)})]})})})})},te=function(e){var n=e.active,s=e.trail,t=e.by,c=e.com_id,r=e.act_id,i=(0,o.useState)(!1),u=(0,a.Z)(i,2),x=u[0],f=u[1],j=(0,l.I0)(),_=(0,l.v9)((function(e){return e.uploads})),p=_.scanned,g=_.attachments,v=_.isLoading,y=function(e){switch(e){case"act":j((0,ne.X)({act_id:r}));break;case"signed":j((0,ne.X)({signed_attach_id:r}));break;default:j((0,ne.X)({com_id:c}))}f(!x)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"border w-100 rounded p-2 ms-3",children:[(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsx)("h6",{className:"".concat(n&&"text-success"),children:s}),s.includes("Communication has been created")&&(0,h.jsx)(d.zx,{outline:!0,className:"ms-auto d-block mb-3",color:"primary p-1",style:{fontSize:"16px"},onClick:function(){return y("com")},children:(0,h.jsx)(m.qzI,{})}),s.includes("Added action taken.")&&(0,h.jsx)(d.zx,{outline:!0,className:"ms-auto d-block mb-3",color:"primary p-1",style:{fontSize:"16px"},onClick:function(){return y("act")},children:(0,h.jsx)(m.qzI,{})}),s.includes("Communication complied")&&(0,h.jsx)(d.zx,{outline:!0,className:"ms-auto d-block mb-3",color:"primary p-1",style:{fontSize:"16px"},onClick:function(){return y("signed")},children:(0,h.jsx)(m.qzI,{})})]}),(0,h.jsx)("div",{className:"d-flex justify-content-between",children:(0,h.jsxs)("i",{children:["by ",t]})})]}),(0,h.jsx)(se,{isOpen:x,scanned:p,attachments:g,setOpen:f,isLoading:v})]})},ce=function(e){var n=e.active,s=e.date;return(0,h.jsxs)("div",{className:"d-flex p-0",style:{fontSize:".8rem"},children:[(0,h.jsx)("span",{className:"text-center",children:y()(s).format("DD MMM YYYY hh:mm A")}),(0,h.jsx)("div",{className:"rounded-circle bg-secondary ".concat(n&&"bg-success"," p-2 align-self-start"),style:{zIndex:"2"}})]})},ae=function(e){var n=e.active,s=e.trail,t=e.by,c=e.date,a=e.com_id,r=e.act_id;return(0,h.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,h.jsx)(ce,{active:n,date:c}),(0,h.jsx)(te,{active:n,trail:s,by:t,com_id:a,act_id:r})]})},re=function(e){var n=e.isModalOpen,s=e.toggleModal,t=(0,l.v9)((function(e){return e.trail})),c=t.isLoading,a=t.errorMessage,r=t.trails.map((function(e,n){var s="".concat(e.emp_firstname," ").concat(e.emp_middlename[0]," ").concat(e.emp_lastname," - ").concat(e.office_code);return(0,h.jsx)(ae,{active:0===n,trail:e.trail_description,act_id:e.act_id,com_id:e.com_id,by:s,date:e.trail_date},n)}));return(0,h.jsx)("div",{children:(0,h.jsx)(u.F0,{isModalOpen:n,toggleModal:s,title:"Document Trail",size:"md",children:(0,h.jsx)(d.fe,{children:(0,h.jsx)(u.pO,{isLoading:c,errorMessage:a,children:r})})})})},ie=s(2982),oe=(s(2978),s(666),s(554)),le=s(7161),de=s(763),ue=s.n(de),me=function(e){var n=e.onFilterCom,s=e.communications,t=(0,o.useState)(!1),c=(0,a.Z)(t,2),r=c[0],i=c[1],l=(0,o.useState)([{startDate:(0,oe.Z)(new Date,7),endDate:new Date,key:"selection"}]),x=(0,a.Z)(l,2),f=x[0],j=x[1],_=(0,o.useState)([]),p=(0,a.Z)(_,2),g=p[0],v=p[1],b=(0,o.useState)("None"),C=(0,a.Z)(b,2),N=C[0],I=C[1],k=function(){return i(!r)},w=function(e){var n=e.target.getAttribute("data-id");document.getElementById(n).remove()},M=g.map((function(e){return(0,h.jsxs)(d.l0,{className:"d-flex mb-2 filters",id:"filterForm"+e,onSubmit:function(e){return e.preventDefault()},children:[(0,h.jsxs)(d.II,{type:"select",className:"me-2",name:"column",children:[(0,h.jsx)("option",{value:"control_no",children:"Control Number"}),(0,h.jsx)("option",{value:"subject",children:"Subject"}),(0,h.jsx)("option",{value:"source",children:"Source"}),(0,h.jsx)("option",{value:"classification",children:"Classification"})]}),(0,h.jsxs)(d.II,{type:"select",className:"me-2",name:"operator",children:[(0,h.jsx)("option",{value:"contains",children:"contains"}),(0,h.jsx)("option",{value:"is",children:"is"})]}),(0,h.jsx)(d.II,{type:"text",className:"me-2",name:"search_value"}),(0,h.jsx)(d.zx,{color:"danger",size:"sm","data-id":"filterForm"+e,onClick:w,children:(0,h.jsx)(m.dnY,{style:{pointerEvents:"none"}})})]},e)}));return(0,h.jsxs)("div",{children:[(0,h.jsx)(u.s,{name:"Advanced Search",icon:r?(0,h.jsx)(m.jnn,{}):(0,h.jsx)(m.F0C,{}),onClick:k}),(0,h.jsx)(d.UO,{isOpen:r,children:(0,h.jsx)("div",{className:"d-flex justify-content-center",children:(0,h.jsx)(d.Zb,{className:"shadow",children:(0,h.jsxs)(d.eW,{children:[(0,h.jsxs)("div",{className:"d-lg-flex justify-content-center align-items-center",children:[(0,h.jsx)("div",{className:"me-md-5",children:(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"filter",children:["Filters \xa0",(0,h.jsx)(u.s,{name:"Add Filter",color:"secondary",icon:(0,h.jsx)(m.B8K,{}),className:"mb-2",onClick:function(){v([].concat((0,ie.Z)(g),[g.length+1]))}})]}),M]})}),(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"daterange",children:"Date Range:"}),(0,h.jsx)("br",{}),(0,h.jsx)(le.C0,{editableDateInputs:!0,onChange:function(e){return j([e.selection])},moveRangeOnFirstSelection:!1,ranges:f})]})]}),(0,h.jsx)(u.s,{name:"Apply Search",icon:(0,h.jsx)(m.dVI,{}),className:"d-block mx-auto",onClick:function(){var e=[],t=f[0],c=t.startDate,a=t.endDate;document.querySelectorAll(".filters").forEach((function(n){var s=new FormData(n),t={};s.forEach((function(e,n){t[n]=e})),e.push(t)}));var r=y()(c).format("MM-DD-YYYY"),i=y()(a).format("MM-DD-YYYY"),o=s.filter((function(n){var s={control_no:n.com_controlNo,subject:n.com_subject,source:"".concat(n.com_source_name,", ").concat(n.com_source_position,", ").concat(n.com_source_office),encoded_by:"".concat(n.emp_firstname," ").concat(n.emp_lastname," - ").concat(n.office_code),classification:"".concat(n.cat_name," ").concat(n.class_name),date_received:y()(n.com_dateReceived).format("MM-DD-YYYY")};return!e.map((function(e){return"is"===e.operator?s[e.column]===e.search_value:s[e.column].toLowerCase().includes(e.search_value.toLowerCase())})).includes(!1)&&y()(r).isSameOrBefore(s.date_received)&&y()(i).isSameOrAfter(s.date_received)}));I((function(){return e.map((function(e){var n="";switch(e.column){case"control_no":n="Control Number";break;case"subject":n="Subject";break;case"source":n="Source";break;case"encoded_by":n="Encoded By";break;case"date_received":n="Date Received";break;case"classification":n="Classification"}return'"'.concat(n,'" ').concat(e.operator,' "').concat(e.search_value,'"')})).join(", ")+" from ".concat(r," to ").concat(i)})),n(o),k()},size:"md",color:"success"})]})})})}),(0,h.jsx)("br",{}),(0,h.jsxs)("i",{className:"text-dark",children:["Filters: ",(0,h.jsx)("span",{className:"text-success",children:N})]})]})},xe=(s(4622),s(4942)),fe=s(1413),he=s(763),je=function(e){var n=e.label,s=void 0===n?"Scanned Copies":n,t=e.required,c=void 0!==t&&t,r=(0,o.useState)({scanned:!1,attachments:!1}),i=(0,a.Z)(r,2),l=i[0],u=i[1];return(0,h.jsxs)(d.cw,{children:[(0,h.jsxs)(d.__,{for:"scanned",children:[s,c&&(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.II,{onChange:function(e){var n=e.target,s=n.getAttribute("name");he.isEmpty(n.files)?u((0,fe.Z)((0,fe.Z)({},l),{},(0,xe.Z)({},s,!1))):n.files[0].size>25e6?u((0,fe.Z)((0,fe.Z)({},l),{},(0,xe.Z)({},s,!0))):u((0,fe.Z)((0,fe.Z)({},l),{},(0,xe.Z)({},s,!1)))},bsSize:"sm",id:"scanned",name:"scanned",type:"file",multiple:!0,accept:"image/*",required:c,invalid:l.scanned}),(0,h.jsx)(d.AG,{children:"File too large. Maximum is 25mb."}),(0,h.jsx)(d.R9,{children:"MULTIPLE FILES ALLOWED 25mb MAX (PNG, JPG, JPEG ONLY)"})]})},_e=s(763),pe=function(e){var n=e.label,s=void 0===n?"Attachments":n,t=(0,o.useState)({scanned:!1,attachments:!1}),c=(0,a.Z)(t,2),r=c[0],i=c[1];return(0,h.jsxs)(d.cw,{children:[(0,h.jsx)(d.__,{for:"attachments",children:s}),(0,h.jsx)(d.II,{onChange:function(e){var n=e.target,s=n.getAttribute("name");_e.isEmpty(n.files)?i((0,fe.Z)((0,fe.Z)({},r),{},(0,xe.Z)({},s,!1))):n.files[0].size>25e6?i((0,fe.Z)((0,fe.Z)({},r),{},(0,xe.Z)({},s,!0))):i((0,fe.Z)((0,fe.Z)({},r),{},(0,xe.Z)({},s,!1)))},bsSize:"sm",id:"attachments",name:"attachments",type:"file",multiple:!0,invalid:r.attachments,accept:".xlsx,.xls,image/*,.doc, .docx,.ppt, .pptx,.txt,.pdf"}),(0,h.jsx)(d.AG,{children:"File too large. Maximum is 25mb."}),(0,h.jsx)(d.R9,{children:"MULTIPLE FILES ALLOWED 25mb MAX (PDF, DOCX, PPTX, XLSX, JPG, JPEG, PNG ONLY)"})]})},ge=function(e,n){switch(e){case"for_information":return"For your information/file & reference";case"for_review":return"For your review/comments/recommendation/validation";case"draft_reply":return"Draft reply/For your acknowledgement: "+n;case"rush":return"Rush";case"urgent":return"Urgent";case"for_circulation":return"For circulation & dissemination";case"for_schedule":return"For schedule";case"attend":return"Attend/Represent Me";case"consolidate":return n;default:return"For your appropriate action"}},ve=function(e){var n=e.previewRouting,s=e.togglePreview,t=e.routingData,c=e.onProceed,r=(0,o.useState)("0"),i=(0,a.Z)(r,2),x=i[0],f=i[1],j=(0,o.useState)([]),_=(0,a.Z)(j,2),p=_[0],g=_[1],v=(0,l.v9)((function(e){return e.tasks})).viewCommunicationData,y=p.map((function(e,n){return(0,h.jsxs)(d.Qd,{children:[(0,h.jsx)(d._m,{targetId:n,children:e.fullname}),(0,h.jsxs)(d.X1,{accordionId:n,children:[(0,h.jsx)("strong",{className:"d-block",children:"Legends"}),ue().isEmpty(e.legends)?(0,h.jsx)("i",{className:"text-info",children:"No checked/selected routing legends."}):(0,h.jsx)("ul",{children:e.legends.map((function(n){var s="consolidate"===n?e.consolidate_text:e.draft_reply_text;return(0,h.jsx)("li",{children:ge(n,s)})}))}),(0,h.jsx)("strong",{className:"d-block",children:"Remarks"}),(0,de.isEmpty)(e.remarks)?(0,h.jsx)("i",{className:"text-info",children:"No remarks."}):(0,h.jsx)("p",{className:"ms-3",children:e.remarks})]})]})}));return(0,o.useEffect)((function(){var e=t.map((function(e){return e.routing_recipients.map((function(n){return{fullname:n.user_fullname,remarks:e.routing_remarks,legends:e.routing_legend,consolidate_text:e.consolidate_text,draft_reply_text:e.draft_reply_text}}))}));g(e.flat())}),[t]),(0,h.jsxs)(u.F0,{isModalOpen:n,toggleModal:s,title:"Do you really want to proceed?",size:"md",children:[(0,h.jsx)(d.fe,{children:(0,h.jsxs)(d.W2,{children:[(0,h.jsx)("strong",{children:"".concat(v.com_controlNo)}),(0,h.jsx)("p",{children:v.com_subject}),(0,h.jsx)("hr",{}),(0,h.jsx)("strong",{children:"Recipients"}),(0,h.jsx)(d.UQ,{open:x,toggle:function(e){x===e?f():f(e)},children:y})]})}),(0,h.jsxs)(d.mz,{children:[(0,h.jsx)(u.s,{name:"Cancel",color:"danger",onClick:s,icon:(0,h.jsx)(m.z3f,{})}),(0,h.jsx)(u.s,{icon:(0,h.jsx)(m.IPg,{}),name:"Yes",onClick:c})]})]})}},2966:function(e,n,s){var t=s(1413),c=(s(2791),s(6871)),a=s(9126),r=s(5917),i=s(184);n.Z=function(e){var n=(0,c.s0)();return(0,i.jsx)(r.Z,(0,t.Z)({outline:!0,onClick:function(){return n(-1)},icon:(0,i.jsx)(a.pjk,{}),name:"Back"},e))}}}]);
//# sourceMappingURL=617.90e2f619.chunk.js.map