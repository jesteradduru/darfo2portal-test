{"version":3,"file":"static/js/894.b377b962.chunk.js","mappings":"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","sources":["Pages/DTS/Drafts/Drafts.jsx"],"sourcesContent":["/*\r\n    Drafts Page\r\n*/\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Container, Row, Col, Button, Spinner } from \"reactstrap\";\r\nimport {  ContentSearch } from \"../../../Layouts/Portal\";\r\nimport DataTable from \"react-data-table-component\";\r\nimport {BsPencilFill, BsTrashFill} from 'react-icons/bs';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { discardDraft, getDrafts } from \"../../../features/dts/drafts/draftsSlice\";\r\nimport moment from \"moment\";\r\nimport { EditDraftModal } from \"../../../Layouts/DTS\";\r\nimport Highlighter from \"react-highlight-words\";\r\nconst _ = require('lodash');\r\n\r\n\r\nconst Drafts = ({socket}) => {\r\n\r\n    const dispatch = useDispatch()\r\n    const [searchValue, setSearchValue] = useState(\"\");\r\n    const {isLoading, drafts} = useSelector(state => state.drafts)\r\n    const [isEditDraftModalOpen, toggleEditDraftModal] = useState(false)\r\n    const [draftData, setDraftData] = useState({})\r\n    const {user_id} = useSelector(state => state.user.user)\r\n    \r\n\r\n\r\n    const columns = [\r\n        {\r\n          name: \"Control No\",\r\n          selector: (row) => row.com_controlNo,\r\n          sortable: true,\r\n          wrap: true,\r\n          cell: (row) => {\r\n            if(_.isEmpty(searchValue)){\r\n              return row.com_controlNo;\r\n            }else{\r\n              return <Highlighter\r\n                highlightClassName=\"bg-super-light-green\"\r\n                searchWords={[searchValue]}\r\n                autoEscape={true}\r\n                textToHighlight={row.com_controlNo}\r\n              />\r\n            }\r\n          }\r\n        },\r\n        { name: \"Classification\", selector: (row) => row.class_name, sortable: true, cell: (row) => row.class_name + ' ' + row.cat_name },\r\n        { name: \"Subject\", selector: (row) => row.com_subject, sortable: true, wrap: true},\r\n        { name: \"Date Created\", selector: (row) => row.com_dateCreated, sortable: true, cell: (row) => moment(row.com_dateCreated).format('dddd, MMMM Do YYYY')},\r\n        { name: \"Action\", cell: (row) => {\r\n          return (\r\n            <div className=\"d-flex\">\r\n              <Button size=\"sm\" color=\"success\" className=\"me-1\" onClick={()=> {\r\n                toggleEditDraftModal(!isEditDraftModalOpen)\r\n                setDraftData(row)\r\n              }}><BsPencilFill /></Button>\r\n              <Button size=\"sm\" color=\"danger\" onClick={async () => {\r\n                if(window.confirm(`Do you really want to discard this communication?`)){\r\n                  await dispatch(discardDraft(row.com_id))\r\n                  .then(() => dispatch(getDrafts()))\r\n                }\r\n              }}><BsTrashFill /></Button>\r\n            </div>\r\n          )\r\n        }}\r\n    ];\r\n\r\n    const data = drafts;\r\n\r\n    const filteredData = data.filter((draft) => {\r\n      return draft.com_controlNo.toLowerCase().includes(searchValue.toLocaleLowerCase());\r\n    });\r\n  \r\n    const clearSearch = () => {\r\n      setSearchValue(\"\");\r\n    };\r\n\r\n    const onSearchValueChange = (e) => {\r\n      setSearchValue(e.target.value);\r\n    };\r\n\r\n    useEffect(() => {\r\n      dispatch(getDrafts(user_id))\r\n    }, [dispatch, user_id])\r\n\r\n   \r\n\r\n    return (\r\n    <Container className=\"mt-3\">\r\n   \r\n        {\r\n          !_.isEmpty(draftData) &&\r\n          <EditDraftModal isModalOpen={isEditDraftModalOpen} toggleModal={toggleEditDraftModal} draftData={draftData} socket={socket} />\r\n          }\r\n\r\n      <Row>\r\n        <h3>Drafts</h3>\r\n        <Col md=\"12\">\r\n          <Row>\r\n            <Col md=\"6\">\r\n              <ContentSearch\r\n                placeholder={\"Enter control number...\"}\r\n                className=\"mb-3\"\r\n                onSearchValueChange={onSearchValueChange}\r\n                searchValue={searchValue}\r\n                clearSearch={clearSearch}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n        <Col>\r\n          <div className=\"mt-2\"></div>\r\n          <DataTable\r\n            data={filteredData}\r\n            columns={columns}\r\n            highlightOnHover\r\n            pagination\r\n            progressPending={isLoading}\r\n            progressComponent={\r\n              <Spinner />\r\n            }\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Drafts;\r\n"],"names":["_","require","socket","dispatch","useDispatch","useState","searchValue","setSearchValue","useSelector","state","drafts","isLoading","isEditDraftModalOpen","toggleEditDraftModal","draftData","setDraftData","user_id","user","columns","name","selector","row","com_controlNo","sortable","wrap","cell","isEmpty","highlightClassName","searchWords","autoEscape","textToHighlight","class_name","cat_name","com_subject","com_dateCreated","moment","format","className","size","color","onClick","window","confirm","discardDraft","com_id","then","getDrafts","filteredData","filter","draft","toLowerCase","includes","toLocaleLowerCase","useEffect","isModalOpen","toggleModal","md","placeholder","onSearchValueChange","e","target","value","clearSearch","data","highlightOnHover","pagination","progressPending","progressComponent"],"sourceRoot":""}